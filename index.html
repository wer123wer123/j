<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meldeliste für Schüler*innen</title>
    <style>
        /* Alle bestehenden Styles bleiben gleich ... */

        /* Styling für das Datum und Uhrzeit oben rechts */
        .datetime {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            z-index: 3;
        }
    </style>
</head>
<body>
    <!-- Bläschen, die im Hintergrund fließen -->
    <div class="bubble" style="top: 5%; left: 10%;"></div>
    <div class="bubble" style="top: 20%; left: 50%;"></div>
    <div class="bubble" style="top: 30%; left: 80%;"></div>
    <div class="bubble" style="top: 50%; left: 30%;"></div>
    <div class="bubble" style="top: 60%; left: 60%;"></div>
    <div class="bubble" style="top: 80%; left: 20%;"></div>

    <!-- Anzeige für Datum und Uhrzeit -->
    <div class="datetime" id="datetime"></div>

    <div class="container">
        <h2>Meldeliste für Schüler*innen</h2>
        <input type="text" id="nameInput" placeholder="Dein Name" maxlength="25" onkeypress="handleKeyPress(event)">
        <button onclick="addStudent()">Eintragen</button>
        <button class="clear-button" onclick="clearList()">Alles Entfernen</button>

        <p class="instructions">Trage deinen Namen ein und bestätige mit Enter oder mit der Enter-Taste, um deinen Namen auszutragen, klicke ihn einmal an.</p>
        
        <ul id="studentList"></ul>
    </div>

    <script>
        let students = JSON.parse(localStorage.getItem('students')) || [];
        const studentList = document.getElementById('studentList');

        function renderList() {
            studentList.innerHTML = '';
            students.forEach((name, index) => {
                const li = document.createElement('li');
                li.textContent = name;

                if (index >= 4) {
                    const waitMessage = document.createElement('p');
                    waitMessage.className = 'wait-message';
                    waitMessage.textContent = "Der nächste Mitarbeiter ist schon für Sie reserviert...";
                    
                    const waitNumber = document.createElement('p');
                    waitNumber.className = 'wait-number';
                    waitNumber.textContent = `Wartenummer: ${index - 4 + 5}`;

                    li.appendChild(waitMessage);
                    li.appendChild(waitNumber);
                }

                li.onclick = () => removeStudent(index);
                studentList.appendChild(li);
            });

            localStorage.setItem('students', JSON.stringify(students));
        }

        function addStudent() {
            const name = document.getElementById('nameInput').value.trim();
            if (name && !students.includes(name)) {
                students.push(name);
                document.getElementById('nameInput').value = '';
                renderList();
            }
        }

        function removeStudent(index) {
            students.splice(index, 1);
            renderList();
        }

        function clearList() {
            students = [];
            renderList();
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                addStudent();
            }
        }

        function updateDateTime() {
            const now = new Date();
            const options = {
                weekday: 'short',
                day: '2-digit',
                month: 'short',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            };
            const formattedDateTime = now.toLocaleString('de-DE', options) + ' UTC';
            document.getElementById('datetime').textContent = formattedDateTime;
        }

        setInterval(updateDateTime, 60000);  // Aktualisiere alle 60 Sekunden
        updateDateTime();  // Initiale Anzeige

        renderList();
    </script>
</body>
</html>
